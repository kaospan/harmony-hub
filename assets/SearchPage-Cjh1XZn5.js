import{e as N,r as m,j as e,B as l,m as d}from"./index-BX1-5uJX.js";import{S as v,B as y}from"./BottomNav-DdksZANf.js";import{C as g}from"./ChordBadge-D8slQnnf.js";import{I as b}from"./input-D92xCCDs.js";import{s as u,p as w}from"./seedTracks-CpIFGQdB.js";import{g as _,o as C}from"./providers-TqTXgJ0o.js";import{M as P}from"./music-BxcFe2bf.js";import{T as S}from"./trending-up-DKlj5maF.js";import{A as L}from"./arrow-right-BTo3vhi0.js";import{P as j}from"./play-DrkYy18X.js";import{E as z}from"./external-link-Cr5ltfN4.js";function Q(){N();const[a,x]=m.useState(""),[i,p]=m.useState("song"),n=m.useMemo(()=>{if(!a.trim())return[];if(i==="song"){const s=a.toLowerCase();return u.filter(r=>{var o,t;return r.title.toLowerCase().includes(s)||((o=r.artist)==null?void 0:o.toLowerCase().includes(s))||((t=r.album)==null?void 0:t.toLowerCase().includes(s))})}else{const s=a.toUpperCase().split(/[-–—,\s]+/).map(r=>r.trim()).filter(Boolean);return u.filter(r=>{if(!r.progression_roman)return!1;const o=r.progression_roman.map(t=>t.toUpperCase());return s.every(t=>o.includes(t)||o.includes(t.toLowerCase()))})}},[a,i]),h=s=>{const r=_({spotifyId:s.spotify_id,youtubeId:s.youtube_id,urlSpotifyWeb:s.url_spotify_web,urlSpotifyApp:s.url_spotify_app,urlYoutube:s.url_youtube}),o=r.find(c=>c.provider==="spotify"),t=r.find(c=>c.provider==="youtube"),f=o||t||r[0];f&&C(f,!0)};return e.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 glass-strong safe-top",children:e.jsxs("div",{className:"px-4 py-4 max-w-lg mx-auto space-y-3",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Search"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{variant:i==="song"?"default":"outline",size:"sm",onClick:()=>p("song"),className:"flex-1",children:[e.jsx(P,{className:"w-4 h-4 mr-1.5"}),"Song / Artist"]}),e.jsxs(l,{variant:i==="chord"?"default":"outline",size:"sm",onClick:()=>p("chord"),className:"flex-1",children:[e.jsx(S,{className:"w-4 h-4 mr-1.5"}),"Chord Progression"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(b,{placeholder:i==="song"?"Search songs or artists...":"e.g., vi-IV-I-V or I-V-vi-IV",value:a,onChange:s=>x(s.target.value),className:"pl-10 bg-muted/50",autoFocus:!0})]})]})}),e.jsxs("main",{className:"px-4 py-4 max-w-lg mx-auto space-y-6",children:[i==="chord"&&!a&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Popular Progressions"}),e.jsx("div",{className:"space-y-2",children:w.slice(0,5).map((s,r)=>e.jsxs(d.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.05},onClick:()=>x(s.progression.join("-")),className:"w-full p-4 glass rounded-xl text-left group hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsx(L,{className:"w-4 h-4 text-muted-foreground group-hover:text-foreground transition-colors"})]}),e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:s.progression.map((o,t)=>e.jsx(g,{chord:o,size:"sm"},t))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.description})]},s.name))})]}),n.length>0&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground mb-3",children:["Results (",n.length,")"]}),e.jsx("div",{className:"space-y-2",children:n.map((s,r)=>e.jsx(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.03},className:"p-4 glass rounded-xl",children:e.jsxs("div",{className:"flex gap-4",children:[s.cover_url&&e.jsx("img",{src:s.cover_url,alt:"",className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium truncate",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.artist}),s.progression_roman&&e.jsx("div",{className:"flex gap-1 mt-2 flex-wrap",children:s.progression_roman.map((o,t)=>e.jsx(g,{chord:o,size:"sm"},t))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>h(s),title:"Play on streaming service",children:e.jsx(j,{className:"w-4 h-4"})}),s.url_youtube&&e.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>window.open(s.url_youtube,"_blank"),title:"Open on YouTube",children:e.jsx(z,{className:"w-3.5 h-3.5"})})]})]})},s.id))})]}),a&&n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-muted-foreground",children:['No results found for "',a,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try a different search term"})]}),!a&&i==="song"&&e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Trending Tracks"}),e.jsx("div",{className:"space-y-2",children:u.slice(0,10).map((s,r)=>e.jsx(d.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.03},className:"p-4 glass rounded-xl",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-8 text-lg font-bold text-muted-foreground",children:r+1}),s.cover_url&&e.jsx("img",{src:s.cover_url,alt:"",className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium truncate",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:s.artist})]}),e.jsx(l,{variant:"ghost",size:"icon",className:"h-8 w-8 flex-shrink-0",onClick:()=>h(s),title:"Play on streaming service",children:e.jsx(j,{className:"w-4 h-4"})})]})},s.id))})]})]}),e.jsx(y,{})]})}export{Q as default};
