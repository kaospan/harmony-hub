import{c as h,r as g,d as P,e as G,j as e,a as p,m as x,C as J,A as O,B as R}from"./index-BX1-5uJX.js";import{I as $}from"./input-D92xCCDs.js";import{A as j,a as b,b as _,f as k}from"./formatDistanceToNow-CBRWQ1EU.js";import{M as K,S as W,a as Z,d as y,b as Q}from"./scroll-area-l8qt1WvI.js";import{H as B}from"./heart-DyKYkRn4.js";import{E as Y}from"./external-link-Cr5ltfN4.js";import{M as U}from"./music-BxcFe2bf.js";import{C as X}from"./disc-3-CudFrOvr.js";import{U as ee}from"./BottomNav-DdksZANf.js";import{C as te}from"./clock-Cm39k8pq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=h("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=h("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=h("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=h("Drum",[["path",{d:"m2 2 8 8",key:"1v6059"}],["path",{d:"m22 2-8 8",key:"173r8a"}],["ellipse",{cx:"12",cy:"9",rx:"10",ry:"5",key:"liohsx"}],["path",{d:"M7 13.4v7.9",key:"1yi6u9"}],["path",{d:"M12 14v8",key:"1tn2tj"}],["path",{d:"M17 13.4v7.9",key:"eqz2v3"}],["path",{d:"M2 9v8a10 5 0 0 0 20 0V9",key:"1750ul"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=h("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=h("Guitar",[["path",{d:"m11.9 12.1 4.514-4.514",key:"109xqo"}],["path",{d:"M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z",key:"txyc8t"}],["path",{d:"m6 16 2 2",key:"16qmzd"}],["path",{d:"M8.2 9.9C8.7 8.8 9.8 8 11 8c2.8 0 5 2.2 5 5 0 1.2-.8 2.3-1.9 2.8l-.9.4A2 2 0 0 0 12 18a4 4 0 0 1-4 4c-3.3 0-6-2.7-6-6a4 4 0 0 1 4-4 2 2 0 0 0 1.8-1.2z",key:"1u8q3z"}],["circle",{cx:"11.5",cy:"12.5",r:".5",fill:"currentColor",key:"16onso"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=h("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=h("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),oe=[{id:"1",user_id:"u1",content:"This beat is absolutely fire! The way it samples the original is genius ðŸ”¥",created_at:new Date(Date.now()-5*60*1e3).toISOString(),likes_count:42,user:{display_name:"MusicLover99",avatar_url:void 0}},{id:"2",user_id:"u2",content:"The bassline in this is so smooth. Instant classic.",created_at:new Date(Date.now()-15*60*1e3).toISOString(),likes_count:128,user:{display_name:"BeatHead",avatar_url:void 0},is_pinned:!0},{id:"3",user_id:"u3",content:"Just found this through the sample connection. Amazing discovery!",created_at:new Date(Date.now()-30*60*1e3).toISOString(),likes_count:15,user:{display_name:"SampleHunter",avatar_url:void 0}},{id:"4",user_id:"u4",content:"This takes me back to summer 2024. Perfect vibes.",created_at:new Date(Date.now()-60*60*1e3).toISOString(),likes_count:8,user:{display_name:"VibeMaster",avatar_url:void 0}},{id:"5",user_id:"u5",content:"Anyone else hear the jazz influence in the chord progression?",created_at:new Date(Date.now()-2*60*60*1e3).toISOString(),likes_count:23,user:{display_name:"JazzHead",avatar_url:void 0}}];function Me({entityId:a,entityType:o,entityTitle:n,className:i}){var M,D,C,I,A;const[s,l]=g.useState(oe),[m,u]=g.useState(""),[N,H]=g.useState(!1),F=g.useRef(null),{user:f}=P(),w=G(),c=s.reduce((t,d)=>d.likes_count>((t==null?void 0:t.likes_count)??0)?d:t,s[0]),S=s.filter(t=>t.id!==(c==null?void 0:c.id)).sort((t,d)=>new Date(d.created_at).getTime()-new Date(t.created_at).getTime()),V=async t=>{var r;if(t.preventDefault(),!m.trim())return;if(!f){w("/auth");return}const d={id:`temp-${Date.now()}`,user_id:f.id,content:m.trim(),created_at:new Date().toISOString(),likes_count:0,user:{display_name:(r=f.email)==null?void 0:r.split("@")[0]}};l(v=>[d,...v]),u("")},q=t=>{if(!f){w("/auth");return}l(d=>d.map(r=>r.id===t?{...r,likes_count:r.user_liked?r.likes_count-1:r.likes_count+1,user_liked:!r.user_liked}:r))};return e.jsxs("div",{className:p("flex flex-col",i),children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-t-xl cursor-pointer",onClick:()=>H(!N),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Live Comments"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",s.length,")"]})]}),e.jsx(x.div,{animate:{rotate:N?180:0},transition:{duration:.2},children:e.jsx(J,{className:"w-5 h-5 text-muted-foreground"})})]}),e.jsx(O,{children:N&&e.jsxs(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:[e.jsx(W,{className:"h-64 p-3 bg-background/50 rounded-b-xl",ref:F,children:e.jsxs("div",{className:"space-y-3",children:[S.map((t,d)=>{var r,v,L,T,z;return e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:d*.05},className:"flex gap-3 p-2 rounded-lg hover:bg-muted/30 transition-colors",children:[e.jsxs(j,{className:"w-8 h-8",children:[e.jsx(b,{src:(r=t.user)==null?void 0:r.avatar_url}),e.jsx(_,{className:"text-xs bg-primary/20 text-primary",children:((T=(L=(v=t.user)==null?void 0:v.display_name)==null?void 0:L[0])==null?void 0:T.toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:((z=t.user)==null?void 0:z.display_name)||"Anonymous"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:k(new Date(t.created_at),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-foreground/90 mt-0.5",children:t.content}),e.jsxs("button",{onClick:()=>q(t.id),className:p("flex items-center gap-1 mt-1 text-xs transition-colors",t.user_liked?"text-accent":"text-muted-foreground hover:text-accent"),children:[e.jsx(B,{className:p("w-3.5 h-3.5",t.user_liked&&"fill-current")}),t.likes_count]})]})]},t.id)}),S.length===0&&e.jsx("p",{className:"text-center text-muted-foreground text-sm py-8",children:"Be the first to comment!"})]})}),e.jsxs("form",{onSubmit:V,className:"flex gap-2 p-3 border-t border-border",children:[e.jsx($,{placeholder:f?"Add a comment...":"Sign in to comment",value:m,onChange:t=>u(t.target.value),disabled:!f,className:"flex-1"}),e.jsx(R,{type:"submit",size:"icon",disabled:!m.trim()||!f,className:"shrink-0",children:e.jsx(Z,{className:"w-4 h-4"})})]})]})}),c&&e.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-20 left-4 right-4 lg:left-auto lg:right-8 lg:w-96 z-40",children:e.jsxs("div",{className:"glass rounded-xl p-3 shadow-lg border border-accent/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(de,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-xs font-medium text-accent",children:"Most Liked Comment"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(j,{className:"w-8 h-8",children:[e.jsx(b,{src:(M=c.user)==null?void 0:M.avatar_url}),e.jsx(_,{className:"text-xs bg-accent/20 text-accent",children:((I=(C=(D=c.user)==null?void 0:D.display_name)==null?void 0:C[0])==null?void 0:I.toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium truncate",children:(A=c.user)==null?void 0:A.display_name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:k(new Date(c.created_at),{addSuffix:!0})})]}),e.jsx("p",{className:"text-sm text-foreground/90 mt-0.5 line-clamp-2",children:c.content}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-accent",children:[e.jsx(B,{className:"w-3.5 h-3.5 fill-current"}),c.likes_count]})]})]})]})})]})}const me={vocals:{icon:ce,label:"Vocals",color:"text-pink-500 bg-pink-500/10"},hook:{icon:y,label:"Hook",color:"text-purple-500 bg-purple-500/10"},drums:{icon:re,label:"Drums",color:"text-orange-500 bg-orange-500/10"},bassline:{icon:le,label:"Bassline",color:"text-blue-500 bg-blue-500/10"},melody:{icon:U,label:"Melody",color:"text-green-500 bg-green-500/10"},lyrics:{icon:ne,label:"Lyrics",color:"text-yellow-500 bg-yellow-500/10"},multiple:{icon:y,label:"Multiple Elements",color:"text-accent bg-accent/10"},other:{icon:y,label:"Other",color:"text-muted-foreground bg-muted"}},ue=[{id:"1",original_track:{id:"orig",title:"",artist:""},sampling_track:{id:"s1",title:"Lose Yourself",artist:"Eminem",cover_url:"https://i.scdn.co/image/ab67616d0000b273e1e7e9cf0e30d7a5b1c2f0a8",album:"8 Mile"},element:"drums",description:"Uses the iconic drum pattern from the original",verified:!0,votes:245},{id:"2",original_track:{id:"orig",title:"",artist:""},sampling_track:{id:"s2",title:"Gold Digger",artist:"Kanye West",cover_url:"https://i.scdn.co/image/ab67616d0000b273d4f5a8e2c1a2e3b4c5d6e7f8",album:"Late Registration"},element:"vocals",description:"Samples the vocal hook from the chorus",verified:!0,votes:189},{id:"3",original_track:{id:"orig",title:"",artist:""},sampling_track:{id:"s3",title:"Uptown Funk",artist:"Bruno Mars",cover_url:"https://i.scdn.co/image/ab67616d0000b273a1b2c3d4e5f6a7b8c9d0e1f2",album:"Uptown Special"},element:"bassline",description:"Interpolates the signature bassline",verified:!1,votes:67}],xe=[{id:"4",original_track:{id:"o1",title:"I Got the...",artist:"Labi Siffre",cover_url:"https://i.scdn.co/image/ab67616d0000b273f1f2f3f4f5f6f7f8f9f0f1f2",album:"Remember My Song"},sampling_track:{id:"curr",title:"",artist:""},element:"hook",description:"The main guitar riff was sampled for the beat",verified:!0,votes:312,start_time:45},{id:"5",original_track:{id:"o2",title:"Funky Drummer",artist:"James Brown",cover_url:"https://i.scdn.co/image/ab67616d0000b273c1c2c3c4c5c6c7c8c9c0c1c2",album:"In the Jungle Groove"},sampling_track:{id:"curr",title:"",artist:""},element:"drums",description:"Classic breakbeat from the bridge section",verified:!0,votes:567,start_time:128}];function pe({element:a}){const o=me[a],n=o.icon;return e.jsxs("span",{className:p("inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium",o.color),children:[e.jsx(n,{className:"w-3 h-3"}),o.label]})}function E({connection:a,direction:o}){const n=o==="sampled_by"?a.sampling_track:a.original_track;return e.jsxs(x.div,{initial:{opacity:0,x:o==="sampled_by"?20:-20},animate:{opacity:1,x:0},className:"flex gap-3 p-3 glass rounded-xl hover:bg-muted/30 transition-colors group cursor-pointer",children:[e.jsx("div",{className:"w-14 h-14 rounded-lg overflow-hidden bg-muted shrink-0",children:n.cover_url?e.jsx("img",{src:n.cover_url,alt:n.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(U,{className:"w-6 h-6 text-muted-foreground"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:n.title}),a.verified&&e.jsx(ie,{className:"w-3.5 h-3.5 text-primary shrink-0"})]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n.artist}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx(pe,{element:a.element}),a.start_time&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["@ ",Math.floor(a.start_time/60),":",String(a.start_time%60).padStart(2,"0")]})]}),a.description&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-1",children:a.description})]}),e.jsx("div",{className:"flex items-center text-muted-foreground group-hover:text-primary transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]})}function De({trackId:a,trackTitle:o,className:n}){const[i,s]=g.useState("sampled_by"),l=ue,m=xe;return e.jsxs("div",{className:p("space-y-4",n),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>s("sampled_by"),className:p("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors",i==="sampled_by"?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted"),children:[e.jsx(ae,{className:"w-4 h-4"}),"Sampled By (",l.length,")"]}),e.jsxs("button",{onClick:()=>s("samples_from"),className:p("flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors",i==="samples_from"?"bg-primary text-primary-foreground":"bg-muted/50 text-muted-foreground hover:bg-muted"),children:[e.jsx(se,{className:"w-4 h-4"}),"Samples (",m.length,")"]})]}),e.jsx(O,{mode:"wait",children:e.jsx(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"space-y-2",children:i==="sampled_by"?l.length>0?l.map(u=>e.jsx(E,{connection:u,direction:"sampled_by"},u.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No known songs have sampled this track yet"})]}):m.length>0?m.map(u=>e.jsx(E,{connection:u,direction:"samples_from"},u.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No known samples detected in this track"})]})},i)}),(i==="sampled_by"?l:m).length>0&&e.jsxs("button",{className:"w-full py-2 text-sm text-primary hover:underline flex items-center justify-center gap-1",children:["View all on WhoSampled",e.jsx(Y,{className:"w-3.5 h-3.5"})]})]})}const he=[{id:"1",user_id:"u1",display_name:"Alex M.",avatar_url:void 0,listened_at:new Date(Date.now()-5*60*1e3).toISOString(),distance_km:.5,city:"Brooklyn"},{id:"2",user_id:"u2",display_name:"Sarah K.",avatar_url:void 0,listened_at:new Date(Date.now()-15*60*1e3).toISOString(),distance_km:1.2,city:"Manhattan"},{id:"3",user_id:"u3",display_name:"Mike T.",avatar_url:void 0,listened_at:new Date(Date.now()-45*60*1e3).toISOString(),distance_km:2.8,city:"Queens"},{id:"4",user_id:"u4",display_name:"Emma L.",avatar_url:void 0,listened_at:new Date(Date.now()-2*60*60*1e3).toISOString(),distance_km:3.5,city:"Bronx"},{id:"5",user_id:"u5",display_name:"James P.",avatar_url:void 0,listened_at:new Date(Date.now()-4*60*60*1e3).toISOString(),distance_km:5.2,city:"Jersey City"}];function fe(a){return a<1?`${Math.round(a*1e3)}m away`:`${a.toFixed(1)}km away`}function Ce({entityId:a,entityType:o,className:n}){const i=he;return i.length===0?null:e.jsxs("div",{className:p("space-y-4",n),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-bold",children:"Nearby Listeners"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 glass rounded-xl",children:[e.jsxs("div",{className:"flex -space-x-3",children:[i.slice(0,5).map((s,l)=>e.jsx(x.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:l*.1},children:e.jsxs(j,{className:"w-10 h-10 border-2 border-background",children:[e.jsx(b,{src:s.avatar_url}),e.jsx(_,{className:"text-xs bg-primary/20 text-primary",children:s.display_name[0]})]})},s.id)),i.length>5&&e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted border-2 border-background flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["+",i.length-5]})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:[i.length," ",i.length===1?"person":"people"," nearby"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"listened to this recently"})]})]}),e.jsx("div",{className:"space-y-2",children:i.map((s,l)=>e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:l*.05},className:"flex items-center gap-3 p-3 glass rounded-xl hover:bg-muted/30 transition-colors cursor-pointer",children:[e.jsxs(j,{className:"w-10 h-10",children:[e.jsx(b,{src:s.avatar_url}),e.jsx(_,{className:"text-sm bg-primary/20 text-primary",children:s.display_name[0]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:s.display_name}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[s.distance_km!==void 0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),fe(s.distance_km)]}),s.city&&e.jsx("span",{children:s.city})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(te,{className:"w-3 h-3"}),e.jsx("span",{children:k(new Date(s.listened_at),{addSuffix:!0})})]})})]},s.id))})]})}export{ie as B,Me as L,Ce as N,De as S};
