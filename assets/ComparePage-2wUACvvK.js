import{c as bt,p as _t,f as It,q as Ve,r,g as B,j as e,t as Tt,P as M,i as I,v as z,w as ke,D as Rt,x as Pt,y as Et,V as Mt,z as At,h as Pe,R as Dt,E as Lt,F as Ot,a as G,n as He,C as Bt,m as Se}from"./index-BX1-5uJX.js";import{B as Vt}from"./BottomNav-DdksZANf.js";import{C as Ee}from"./ChordBadge-D8slQnnf.js";import{s as ce}from"./seedTracks-CpIFGQdB.js";import{c as Me}from"./index-BdQq_4o_.js";import{u as kt}from"./index-BiV5K_eQ.js";import{h as Ht,u as Ut,R as Ft,F as Wt,C as Ue,S as Kt}from"./index-C8qaemdP.js";import{u as Te}from"./index-CEPZ7l09.js";import{u as $t}from"./index-B5wY23Ui.js";import{K as Ae,R as De}from"./rotate-ccw-DD0Su9mn.js";import{M as Le}from"./music-BxcFe2bf.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=bt("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);var Gt=[" ","Enter","ArrowUp","ArrowDown"],Yt=[" ","Enter"],Q="Select",[de,pe,qt]=_t(Q),[oe,Bo]=It(Q,[qt,Ve]),ue=Ve(),[Xt,Y]=oe(Q),[Zt,Jt]=oe(Q),Fe=o=>{const{__scopeSelect:s,children:t,open:l,defaultOpen:a,onOpenChange:d,value:c,defaultValue:i,onValueChange:n,dir:p,name:v,autoComplete:S,disabled:b,required:_,form:j}=o,u=ue(s),[x,g]=r.useState(null),[m,f]=r.useState(null),[T,A]=r.useState(!1),se=kt(p),[R,L]=Pe({prop:l,defaultProp:a??!1,onChange:d,caller:Q}),[W,X]=Pe({prop:c,defaultProp:i,onChange:n,caller:Q}),V=r.useRef(null),k=x?j||!!x.closest("form"):!0,[K,H]=r.useState(new Set),U=Array.from(K).map(P=>P.props.value).join(";");return e.jsx(Dt,{...u,children:e.jsxs(Xt,{required:_,scope:s,trigger:x,onTriggerChange:g,valueNode:m,onValueNodeChange:f,valueNodeHasChildren:T,onValueNodeHasChildrenChange:A,contentId:Te(),value:W,onValueChange:X,open:R,onOpenChange:L,dir:se,triggerPointerDownPosRef:V,disabled:b,children:[e.jsx(de.Provider,{scope:s,children:e.jsx(Zt,{scope:o.__scopeSelect,onNativeOptionAdd:r.useCallback(P=>{H(O=>new Set(O).add(P))},[]),onNativeOptionRemove:r.useCallback(P=>{H(O=>{const F=new Set(O);return F.delete(P),F})},[]),children:t})}),k?e.jsxs(ut,{"aria-hidden":!0,required:_,tabIndex:-1,name:v,autoComplete:S,value:W,onChange:P=>X(P.target.value),disabled:b,form:j,children:[W===void 0?e.jsx("option",{value:""}):null,Array.from(K)]},U):null]})})};Fe.displayName=Q;var We="SelectTrigger",Ke=r.forwardRef((o,s)=>{const{__scopeSelect:t,disabled:l=!1,...a}=o,d=ue(t),c=Y(We,t),i=c.disabled||l,n=B(s,c.onTriggerChange),p=pe(t),v=r.useRef("touch"),[S,b,_]=ft(u=>{const x=p().filter(f=>!f.disabled),g=x.find(f=>f.value===c.value),m=ht(x,u,g);m!==void 0&&c.onValueChange(m.value)}),j=u=>{i||(c.onOpenChange(!0),_()),u&&(c.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return e.jsx(Tt,{asChild:!0,...d,children:e.jsx(M.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":mt(c.value)?"":void 0,...a,ref:n,onClick:I(a.onClick,u=>{u.currentTarget.focus(),v.current!=="mouse"&&j(u)}),onPointerDown:I(a.onPointerDown,u=>{v.current=u.pointerType;const x=u.target;x.hasPointerCapture(u.pointerId)&&x.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(j(u),u.preventDefault())}),onKeyDown:I(a.onKeyDown,u=>{const x=S.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&b(u.key),!(x&&u.key===" ")&&Gt.includes(u.key)&&(j(),u.preventDefault())})})})});Ke.displayName=We;var $e="SelectValue",ze=r.forwardRef((o,s)=>{const{__scopeSelect:t,className:l,style:a,children:d,placeholder:c="",...i}=o,n=Y($e,t),{onValueNodeHasChildrenChange:p}=n,v=d!==void 0,S=B(s,n.onValueNodeChange);return z(()=>{p(v)},[p,v]),e.jsx(M.span,{...i,ref:S,style:{pointerEvents:"none"},children:mt(n.value)?e.jsx(e.Fragment,{children:c}):d})});ze.displayName=$e;var Qt="SelectIcon",Ge=r.forwardRef((o,s)=>{const{__scopeSelect:t,children:l,...a}=o;return e.jsx(M.span,{"aria-hidden":!0,...a,ref:s,children:l||"â–¼"})});Ge.displayName=Qt;var eo="SelectPortal",Ye=o=>e.jsx(Lt,{asChild:!0,...o});Ye.displayName=eo;var ee="SelectContent",qe=r.forwardRef((o,s)=>{const t=Y(ee,o.__scopeSelect),[l,a]=r.useState();if(z(()=>{a(new DocumentFragment)},[]),!t.open){const d=l;return d?ke.createPortal(e.jsx(Xe,{scope:o.__scopeSelect,children:e.jsx(de.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),d):null}return e.jsx(Ze,{...o,ref:s})});qe.displayName=ee;var D=10,[Xe,q]=oe(ee),to="SelectContentImpl",oo=Ot("SelectContent.RemoveScroll"),Ze=r.forwardRef((o,s)=>{const{__scopeSelect:t,position:l="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:d,onPointerDownOutside:c,side:i,sideOffset:n,align:p,alignOffset:v,arrowPadding:S,collisionBoundary:b,collisionPadding:_,sticky:j,hideWhenDetached:u,avoidCollisions:x,...g}=o,m=Y(ee,t),[f,T]=r.useState(null),[A,se]=r.useState(null),R=B(s,h=>T(h)),[L,W]=r.useState(null),[X,V]=r.useState(null),k=pe(t),[K,H]=r.useState(!1),U=r.useRef(!1);r.useEffect(()=>{if(f)return Ht(f)},[f]),Ut();const P=r.useCallback(h=>{const[C,...E]=k().map(y=>y.ref.current),[N]=E.slice(-1),w=document.activeElement;for(const y of h)if(y===w||(y==null||y.scrollIntoView({block:"nearest"}),y===C&&A&&(A.scrollTop=0),y===N&&A&&(A.scrollTop=A.scrollHeight),y==null||y.focus(),document.activeElement!==w))return},[k,A]),O=r.useCallback(()=>P([L,f]),[P,L,f]);r.useEffect(()=>{K&&O()},[K,O]);const{onOpenChange:F,triggerPointerDownPosRef:$}=m;r.useEffect(()=>{if(f){let h={x:0,y:0};const C=N=>{var w,y;h={x:Math.abs(Math.round(N.pageX)-(((w=$.current)==null?void 0:w.x)??0)),y:Math.abs(Math.round(N.pageY)-(((y=$.current)==null?void 0:y.y)??0))}},E=N=>{h.x<=10&&h.y<=10?N.preventDefault():f.contains(N.target)||F(!1),document.removeEventListener("pointermove",C),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",C),document.addEventListener("pointerup",E,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",C),document.removeEventListener("pointerup",E,{capture:!0})}}},[f,F,$]),r.useEffect(()=>{const h=()=>F(!1);return window.addEventListener("blur",h),window.addEventListener("resize",h),()=>{window.removeEventListener("blur",h),window.removeEventListener("resize",h)}},[F]);const[me,ae]=ft(h=>{const C=k().filter(w=>!w.disabled),E=C.find(w=>w.ref.current===document.activeElement),N=ht(C,h,E);N&&setTimeout(()=>N.ref.current.focus())}),fe=r.useCallback((h,C,E)=>{const N=!U.current&&!E;(m.value!==void 0&&m.value===C||N)&&(W(h),N&&(U.current=!0))},[m.value]),he=r.useCallback(()=>f==null?void 0:f.focus(),[f]),te=r.useCallback((h,C,E)=>{const N=!U.current&&!E;(m.value!==void 0&&m.value===C||N)&&V(h)},[m.value]),le=l==="popper"?we:Je,ne=le===we?{side:i,sideOffset:n,align:p,alignOffset:v,arrowPadding:S,collisionBoundary:b,collisionPadding:_,sticky:j,hideWhenDetached:u,avoidCollisions:x}:{};return e.jsx(Xe,{scope:t,content:f,viewport:A,onViewportChange:se,itemRefCallback:fe,selectedItem:L,onItemLeave:he,itemTextRefCallback:te,focusSelectedItem:O,selectedItemText:X,position:l,isPositioned:K,searchRef:me,children:e.jsx(Ft,{as:oo,allowPinchZoom:!0,children:e.jsx(Wt,{asChild:!0,trapped:m.open,onMountAutoFocus:h=>{h.preventDefault()},onUnmountAutoFocus:I(a,h=>{var C;(C=m.trigger)==null||C.focus({preventScroll:!0}),h.preventDefault()}),children:e.jsx(Rt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:c,onFocusOutside:h=>h.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(le,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:h=>h.preventDefault(),...g,...ne,onPlaced:()=>H(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:I(g.onKeyDown,h=>{const C=h.ctrlKey||h.altKey||h.metaKey;if(h.key==="Tab"&&h.preventDefault(),!C&&h.key.length===1&&ae(h.key),["ArrowUp","ArrowDown","Home","End"].includes(h.key)){let N=k().filter(w=>!w.disabled).map(w=>w.ref.current);if(["ArrowUp","End"].includes(h.key)&&(N=N.slice().reverse()),["ArrowUp","ArrowDown"].includes(h.key)){const w=h.target,y=N.indexOf(w);N=N.slice(y+1)}setTimeout(()=>P(N)),h.preventDefault()}})})})})})})});Ze.displayName=to;var so="SelectItemAlignedPosition",Je=r.forwardRef((o,s)=>{const{__scopeSelect:t,onPlaced:l,...a}=o,d=Y(ee,t),c=q(ee,t),[i,n]=r.useState(null),[p,v]=r.useState(null),S=B(s,R=>v(R)),b=pe(t),_=r.useRef(!1),j=r.useRef(!0),{viewport:u,selectedItem:x,selectedItemText:g,focusSelectedItem:m}=c,f=r.useCallback(()=>{if(d.trigger&&d.valueNode&&i&&p&&u&&x&&g){const R=d.trigger.getBoundingClientRect(),L=p.getBoundingClientRect(),W=d.valueNode.getBoundingClientRect(),X=g.getBoundingClientRect();if(d.dir!=="rtl"){const w=X.left-L.left,y=W.left-w,Z=R.left-y,J=R.width+Z,xe=Math.max(J,L.width),ge=window.innerWidth-D,ve=Me(y,[D,Math.max(D,ge-xe)]);i.style.minWidth=J+"px",i.style.left=ve+"px"}else{const w=L.right-X.right,y=window.innerWidth-W.right-w,Z=window.innerWidth-R.right-y,J=R.width+Z,xe=Math.max(J,L.width),ge=window.innerWidth-D,ve=Me(y,[D,Math.max(D,ge-xe)]);i.style.minWidth=J+"px",i.style.right=ve+"px"}const V=b(),k=window.innerHeight-D*2,K=u.scrollHeight,H=window.getComputedStyle(p),U=parseInt(H.borderTopWidth,10),P=parseInt(H.paddingTop,10),O=parseInt(H.borderBottomWidth,10),F=parseInt(H.paddingBottom,10),$=U+P+K+F+O,me=Math.min(x.offsetHeight*5,$),ae=window.getComputedStyle(u),fe=parseInt(ae.paddingTop,10),he=parseInt(ae.paddingBottom,10),te=R.top+R.height/2-D,le=k-te,ne=x.offsetHeight/2,h=x.offsetTop+ne,C=U+P+h,E=$-C;if(C<=te){const w=V.length>0&&x===V[V.length-1].ref.current;i.style.bottom="0px";const y=p.clientHeight-u.offsetTop-u.offsetHeight,Z=Math.max(le,ne+(w?he:0)+y+O),J=C+Z;i.style.height=J+"px"}else{const w=V.length>0&&x===V[0].ref.current;i.style.top="0px";const Z=Math.max(te,U+u.offsetTop+(w?fe:0)+ne)+E;i.style.height=Z+"px",u.scrollTop=C-te+u.offsetTop}i.style.margin=`${D}px 0`,i.style.minHeight=me+"px",i.style.maxHeight=k+"px",l==null||l(),requestAnimationFrame(()=>_.current=!0)}},[b,d.trigger,d.valueNode,i,p,u,x,g,d.dir,l]);z(()=>f(),[f]);const[T,A]=r.useState();z(()=>{p&&A(window.getComputedStyle(p).zIndex)},[p]);const se=r.useCallback(R=>{R&&j.current===!0&&(f(),m==null||m(),j.current=!1)},[f,m]);return e.jsx(ro,{scope:t,contentWrapper:i,shouldExpandOnScrollRef:_,onScrollButtonChange:se,children:e.jsx("div",{ref:n,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:e.jsx(M.div,{...a,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Je.displayName=so;var no="SelectPopperPosition",we=r.forwardRef((o,s)=>{const{__scopeSelect:t,align:l="start",collisionPadding:a=D,...d}=o,c=ue(t);return e.jsx(Pt,{...c,...d,ref:s,align:l,collisionPadding:a,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});we.displayName=no;var[ro,Re]=oe(ee,{}),ye="SelectViewport",Qe=r.forwardRef((o,s)=>{const{__scopeSelect:t,nonce:l,...a}=o,d=q(ye,t),c=Re(ye,t),i=B(s,d.onViewportChange),n=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),e.jsx(de.Slot,{scope:t,children:e.jsx(M.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:I(a.onScroll,p=>{const v=p.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:b}=c;if(b!=null&&b.current&&S){const _=Math.abs(n.current-v.scrollTop);if(_>0){const j=window.innerHeight-D*2,u=parseFloat(S.style.minHeight),x=parseFloat(S.style.height),g=Math.max(u,x);if(g<j){const m=g+_,f=Math.min(j,m),T=m-f;S.style.height=f+"px",S.style.bottom==="0px"&&(v.scrollTop=T>0?T:0,S.style.justifyContent="flex-end")}}}n.current=v.scrollTop})})})]})});Qe.displayName=ye;var et="SelectGroup",[ao,lo]=oe(et),co=r.forwardRef((o,s)=>{const{__scopeSelect:t,...l}=o,a=Te();return e.jsx(ao,{scope:t,id:a,children:e.jsx(M.div,{role:"group","aria-labelledby":a,...l,ref:s})})});co.displayName=et;var tt="SelectLabel",ot=r.forwardRef((o,s)=>{const{__scopeSelect:t,...l}=o,a=lo(tt,t);return e.jsx(M.div,{id:a.id,...l,ref:s})});ot.displayName=tt;var ie="SelectItem",[io,st]=oe(ie),nt=r.forwardRef((o,s)=>{const{__scopeSelect:t,value:l,disabled:a=!1,textValue:d,...c}=o,i=Y(ie,t),n=q(ie,t),p=i.value===l,[v,S]=r.useState(d??""),[b,_]=r.useState(!1),j=B(s,m=>{var f;return(f=n.itemRefCallback)==null?void 0:f.call(n,m,l,a)}),u=Te(),x=r.useRef("touch"),g=()=>{a||(i.onValueChange(l),i.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(io,{scope:t,value:l,disabled:a,textId:u,isSelected:p,onItemTextChange:r.useCallback(m=>{S(f=>f||((m==null?void 0:m.textContent)??"").trim())},[]),children:e.jsx(de.ItemSlot,{scope:t,value:l,disabled:a,textValue:v,children:e.jsx(M.div,{role:"option","aria-labelledby":u,"data-highlighted":b?"":void 0,"aria-selected":p&&b,"data-state":p?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...c,ref:j,onFocus:I(c.onFocus,()=>_(!0)),onBlur:I(c.onBlur,()=>_(!1)),onClick:I(c.onClick,()=>{x.current!=="mouse"&&g()}),onPointerUp:I(c.onPointerUp,()=>{x.current==="mouse"&&g()}),onPointerDown:I(c.onPointerDown,m=>{x.current=m.pointerType}),onPointerMove:I(c.onPointerMove,m=>{var f;x.current=m.pointerType,a?(f=n.onItemLeave)==null||f.call(n):x.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:I(c.onPointerLeave,m=>{var f;m.currentTarget===document.activeElement&&((f=n.onItemLeave)==null||f.call(n))}),onKeyDown:I(c.onKeyDown,m=>{var T;((T=n.searchRef)==null?void 0:T.current)!==""&&m.key===" "||(Yt.includes(m.key)&&g(),m.key===" "&&m.preventDefault())})})})})});nt.displayName=ie;var re="SelectItemText",rt=r.forwardRef((o,s)=>{const{__scopeSelect:t,className:l,style:a,...d}=o,c=Y(re,t),i=q(re,t),n=st(re,t),p=Jt(re,t),[v,S]=r.useState(null),b=B(s,g=>S(g),n.onItemTextChange,g=>{var m;return(m=i.itemTextRefCallback)==null?void 0:m.call(i,g,n.value,n.disabled)}),_=v==null?void 0:v.textContent,j=r.useMemo(()=>e.jsx("option",{value:n.value,disabled:n.disabled,children:_},n.value),[n.disabled,n.value,_]),{onNativeOptionAdd:u,onNativeOptionRemove:x}=p;return z(()=>(u(j),()=>x(j)),[u,x,j]),e.jsxs(e.Fragment,{children:[e.jsx(M.span,{id:n.textId,...d,ref:b}),n.isSelected&&c.valueNode&&!c.valueNodeHasChildren?ke.createPortal(d.children,c.valueNode):null]})});rt.displayName=re;var at="SelectItemIndicator",lt=r.forwardRef((o,s)=>{const{__scopeSelect:t,...l}=o;return st(at,t).isSelected?e.jsx(M.span,{"aria-hidden":!0,...l,ref:s}):null});lt.displayName=at;var Ne="SelectScrollUpButton",ct=r.forwardRef((o,s)=>{const t=q(Ne,o.__scopeSelect),l=Re(Ne,o.__scopeSelect),[a,d]=r.useState(!1),c=B(s,l.onScrollButtonChange);return z(()=>{if(t.viewport&&t.isPositioned){let i=function(){const p=n.scrollTop>0;d(p)};const n=t.viewport;return i(),n.addEventListener("scroll",i),()=>n.removeEventListener("scroll",i)}},[t.viewport,t.isPositioned]),a?e.jsx(dt,{...o,ref:c,onAutoScroll:()=>{const{viewport:i,selectedItem:n}=t;i&&n&&(i.scrollTop=i.scrollTop-n.offsetHeight)}}):null});ct.displayName=Ne;var je="SelectScrollDownButton",it=r.forwardRef((o,s)=>{const t=q(je,o.__scopeSelect),l=Re(je,o.__scopeSelect),[a,d]=r.useState(!1),c=B(s,l.onScrollButtonChange);return z(()=>{if(t.viewport&&t.isPositioned){let i=function(){const p=n.scrollHeight-n.clientHeight,v=Math.ceil(n.scrollTop)<p;d(v)};const n=t.viewport;return i(),n.addEventListener("scroll",i),()=>n.removeEventListener("scroll",i)}},[t.viewport,t.isPositioned]),a?e.jsx(dt,{...o,ref:c,onAutoScroll:()=>{const{viewport:i,selectedItem:n}=t;i&&n&&(i.scrollTop=i.scrollTop+n.offsetHeight)}}):null});it.displayName=je;var dt=r.forwardRef((o,s)=>{const{__scopeSelect:t,onAutoScroll:l,...a}=o,d=q("SelectScrollButton",t),c=r.useRef(null),i=pe(t),n=r.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return r.useEffect(()=>()=>n(),[n]),z(()=>{var v;const p=i().find(S=>S.ref.current===document.activeElement);(v=p==null?void 0:p.ref.current)==null||v.scrollIntoView({block:"nearest"})},[i]),e.jsx(M.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:I(a.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(l,50))}),onPointerMove:I(a.onPointerMove,()=>{var p;(p=d.onItemLeave)==null||p.call(d),c.current===null&&(c.current=window.setInterval(l,50))}),onPointerLeave:I(a.onPointerLeave,()=>{n()})})}),po="SelectSeparator",pt=r.forwardRef((o,s)=>{const{__scopeSelect:t,...l}=o;return e.jsx(M.div,{"aria-hidden":!0,...l,ref:s})});pt.displayName=po;var Ce="SelectArrow",uo=r.forwardRef((o,s)=>{const{__scopeSelect:t,...l}=o,a=ue(t),d=Y(Ce,t),c=q(Ce,t);return d.open&&c.position==="popper"?e.jsx(Et,{...a,...l,ref:s}):null});uo.displayName=Ce;var mo="SelectBubbleInput",ut=r.forwardRef(({__scopeSelect:o,value:s,...t},l)=>{const a=r.useRef(null),d=B(l,a),c=$t(s);return r.useEffect(()=>{const i=a.current;if(!i)return;const n=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(n,"value").set;if(c!==s&&v){const S=new Event("change",{bubbles:!0});v.call(i,s),i.dispatchEvent(S)}},[c,s]),e.jsx(M.select,{...t,style:{...Mt,...t.style},ref:d,defaultValue:s})});ut.displayName=mo;function mt(o){return o===""||o===void 0}function ft(o){const s=At(o),t=r.useRef(""),l=r.useRef(0),a=r.useCallback(c=>{const i=t.current+c;s(i),function n(p){t.current=p,window.clearTimeout(l.current),p!==""&&(l.current=window.setTimeout(()=>n(""),1e3))}(i)},[s]),d=r.useCallback(()=>{t.current="",window.clearTimeout(l.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(l.current),[]),[t,a,d]}function ht(o,s,t){const a=s.length>1&&Array.from(s).every(p=>p===s[0])?s[0]:s,d=t?o.indexOf(t):-1;let c=fo(o,Math.max(d,0));a.length===1&&(c=c.filter(p=>p!==t));const n=c.find(p=>p.textValue.toLowerCase().startsWith(a.toLowerCase()));return n!==t?n:void 0}function fo(o,s){return o.map((t,l)=>o[(s+l)%o.length])}var ho=Fe,xt=Ke,xo=ze,go=Ge,vo=Ye,gt=qe,So=Qe,vt=ot,St=nt,wo=rt,yo=lt,wt=ct,yt=it,Nt=pt;const Oe=ho,Be=xo,be=r.forwardRef(({className:o,children:s,...t},l)=>e.jsxs(xt,{ref:l,className:G("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",o),...t,children:[s,e.jsx(go,{asChild:!0,children:e.jsx(He,{className:"h-4 w-4 opacity-50"})})]}));be.displayName=xt.displayName;const jt=r.forwardRef(({className:o,...s},t)=>e.jsx(wt,{ref:t,className:G("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(Bt,{className:"h-4 w-4"})}));jt.displayName=wt.displayName;const Ct=r.forwardRef(({className:o,...s},t)=>e.jsx(yt,{ref:t,className:G("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(He,{className:"h-4 w-4"})}));Ct.displayName=yt.displayName;const _e=r.forwardRef(({className:o,children:s,position:t="popper",...l},a)=>e.jsx(vo,{children:e.jsxs(gt,{ref:a,className:G("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...l,children:[e.jsx(jt,{}),e.jsx(So,{className:G("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Ct,{})]})}));_e.displayName=gt.displayName;const No=r.forwardRef(({className:o,...s},t)=>e.jsx(vt,{ref:t,className:G("py-1.5 pl-8 pr-2 text-sm font-semibold",o),...s}));No.displayName=vt.displayName;const Ie=r.forwardRef(({className:o,children:s,...t},l)=>e.jsxs(St,{ref:l,className:G("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",o),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(yo,{children:e.jsx(Ue,{className:"h-4 w-4"})})}),e.jsx(wo,{children:s})]}));Ie.displayName=St.displayName;const jo=r.forwardRef(({className:o,...s},t)=>e.jsx(Nt,{ref:t,className:G("-mx-1 my-1 h-px bg-muted",o),...s}));jo.displayName=Nt.displayName;function Co(o,s){if(!o.progression_roman||!s.progression_roman)return 0;const t=o.progression_roman.map(g=>g.toLowerCase()),l=s.progression_roman.map(g=>g.toLowerCase()),a=t.filter(g=>l.includes(g)).length,d=new Set([...t,...l]).size,c=(g,m)=>{const f=[];for(let T=0;T<=g.length-m;T++)f.push(g.slice(T,T+m).join("-"));return f},i=c(t,2),n=c(l,2),p=i.filter(g=>n.includes(g)).length,v=Math.max(i.length,n.length)||1,S=a/d,b=p/v,j=1-Math.abs(t.length-l.length)*.1,u=o.detected_mode===s.detected_mode?.1:0,x=(S*.3+b*.5+u)*Math.max(.5,j);return Math.min(100,Math.round(x*100))}function bo(o,s){if(!o.progression_roman||!s.progression_roman)return"Unable to compare - missing chord data";const t=o.progression_roman,l=s.progression_roman,a=t.filter(c=>l.map(i=>i.toLowerCase()).includes(c.toLowerCase()));if(a.length===0)return"No shared chords, different harmonic language";const d=[];return a.length===t.length&&a.length===l.length?d.push("Identical chord vocabulary"):d.push(`${a.length} shared chord(s): ${a.join(", ")}`),o.detected_mode===s.detected_mode&&o.detected_mode?d.push(`Both in ${o.detected_mode}`):o.detected_mode&&s.detected_mode&&d.push(`Different modes (${o.detected_mode} vs ${s.detected_mode})`),o.cadence_type===s.cadence_type&&o.cadence_type!=="none"&&d.push(`Same ${o.cadence_type} cadence`),d.join(". ")}function Vo(){var c,i;const[o,s]=r.useState(null),[t,l]=r.useState(null),a=o&&t?Co(o,t):null,d=o&&t?bo(o,t):null;return e.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 glass-strong safe-top",children:e.jsxs("div",{className:"px-4 py-4 max-w-lg mx-auto",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Compare"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compare the harmonic DNA of two songs"})]})}),e.jsxs("main",{className:"px-4 py-4 max-w-lg mx-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Track A"}),e.jsxs(Oe,{value:o==null?void 0:o.id,onValueChange:n=>s(ce.find(p=>p.id===n)||null),children:[e.jsx(be,{className:"bg-muted/50",children:e.jsx(Be,{placeholder:"Select track"})}),e.jsx(_e,{children:ce.map(n=>e.jsx(Ie,{value:n.id,children:e.jsx("span",{className:"truncate",children:n.title})},n.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Track B"}),e.jsxs(Oe,{value:t==null?void 0:t.id,onValueChange:n=>l(ce.find(p=>p.id===n)||null),children:[e.jsx(be,{className:"bg-muted/50",children:e.jsx(Be,{placeholder:"Select track"})}),e.jsx(_e,{children:ce.map(n=>e.jsx(Ie,{value:n.id,children:e.jsx("span",{className:"truncate",children:n.title})},n.id))})]})]})]}),o&&t&&e.jsxs(Se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"text-center py-6",children:e.jsxs("div",{className:"inline-flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[o.cover_url&&e.jsx("img",{src:o.cover_url,alt:"",className:"w-16 h-16 rounded-xl object-cover mb-2"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-20",children:o.title})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs(Se.div,{initial:{scale:.5},animate:{scale:1},className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full glass-strong flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold gradient-text",children:[a,"%"]})}),a!==null&&a>=70&&e.jsx(Se.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:e.jsx(Ue,{className:"w-4 h-4 text-primary-foreground"})})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-2",children:"Similarity"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[t.cover_url&&e.jsx("img",{src:t.cover_url,alt:"",className:"w-16 h-16 rounded-xl object-cover mb-2"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-20",children:t.title})]})]})}),d&&e.jsxs("div",{className:"p-4 glass rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-primary",children:[e.jsx(Kt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Analysis"})]}),e.jsx("p",{className:"text-sm text-foreground",children:d})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-sm",children:o.artist}),e.jsxs("div",{className:"p-3 glass rounded-xl space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ae,{className:"w-3 h-3"}),e.jsxs("span",{children:[o.detected_key||"?"," ",o.detected_mode||""]})]}),o.cadence_type&&o.cadence_type!=="none"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(De,{className:"w-3 h-3"}),e.jsx("span",{className:"capitalize",children:o.cadence_type})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Le,{className:"w-3 h-3"}),e.jsxs("span",{children:[((c=o.progression_roman)==null?void 0:c.length)||0," chords"]})]})]}),o.progression_roman&&e.jsx("div",{className:"flex flex-wrap gap-1",children:o.progression_roman.map((n,p)=>e.jsx(Ee,{chord:n,size:"sm"},p))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-sm",children:t.artist}),e.jsxs("div",{className:"p-3 glass rounded-xl space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ae,{className:"w-3 h-3"}),e.jsxs("span",{children:[t.detected_key||"?"," ",t.detected_mode||""]})]}),t.cadence_type&&t.cadence_type!=="none"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(De,{className:"w-3 h-3"}),e.jsx("span",{className:"capitalize",children:t.cadence_type})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Le,{className:"w-3 h-3"}),e.jsxs("span",{children:[((i=t.progression_roman)==null?void 0:i.length)||0," chords"]})]})]}),t.progression_roman&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.progression_roman.map((n,p)=>e.jsx(Ee,{chord:n,size:"sm"},p))})]})]})]}),(!o||!t)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted/50 mb-4",children:e.jsx(zt,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("p",{className:"text-muted-foreground",children:"Select two tracks to compare their harmonic structure"})]})]}),e.jsx(Vt,{})]})}export{Vo as default};
